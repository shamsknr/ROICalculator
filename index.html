<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ROI Calculator</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            padding: 40px;
        }

        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 10px;
            font-size: 2.5em;
        }

        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 40px;
            font-size: 1.1em;
        }

        .input-section {
            background: #f8f9fa;
            padding: 30px;
            border-radius: 15px;
            margin-bottom: 30px;
        }

        .input-group {
            margin-bottom: 25px;
        }

        .real-estate-section {
            margin-top: 25px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            overflow: hidden;
        }

        .section-header {
            padding: 15px 20px;
            background: #f0f0f0;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-weight: 600;
            color: #555;
            transition: background 0.2s;
        }

        .section-header:hover {
            background: #e8e8e8;
        }

        .toggle-icon {
            transition: transform 0.3s;
        }

        .toggle-icon.rotated {
            transform: rotate(180deg);
        }

        .real-estate-inputs {
            padding: 20px;
            background: white;
        }

        label {
            display: block;
            margin-bottom: 8px;
            color: #555;
            font-weight: 600;
            font-size: 0.95em;
        }

        input[type="number"],
        input[type="date"] {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 1em;
            transition: border-color 0.3s;
        }

        input[type="number"]:focus,
        input[type="date"]:focus {
            outline: none;
            border-color: #667eea;
        }

        .input-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .calculate-btn {
            width: 100%;
            padding: 15px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            margin-top: 10px;
        }

        .calculate-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.4);
        }

        .calculate-btn:active {
            transform: translateY(0);
        }

        .results-section {
            display: none;
        }

        .results-section.active {
            display: block;
        }

        .results-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .result-card {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .result-card.highlight {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .result-label {
            font-size: 0.9em;
            margin-bottom: 8px;
            opacity: 0.8;
        }

        .result-card.highlight .result-label {
            opacity: 0.9;
        }

        .result-value {
            font-size: 2em;
            font-weight: 700;
        }

        .breakdown-section {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 15px;
            margin-top: 20px;
        }

        .breakdown-title {
            font-size: 1.3em;
            color: #333;
            margin-bottom: 20px;
            font-weight: 600;
        }

        .breakdown-item {
            display: flex;
            justify-content: space-between;
            padding: 12px 0;
            border-bottom: 1px solid #e0e0e0;
        }

        .breakdown-item:last-child {
            border-bottom: none;
        }

        .breakdown-label {
            color: #555;
            font-weight: 500;
        }

        .breakdown-value {
            color: #333;
            font-weight: 600;
        }

        .recommendation-section {
            margin-top: 30px;
        }

        .recommendation-box {
            padding: 30px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            transition: all 0.3s;
        }

        .recommendation-box.excellent {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
        }

        .recommendation-box.good {
            background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
            color: white;
        }

        .recommendation-box.moderate {
            background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
            color: white;
        }

        .recommendation-box.poor {
            background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
            color: white;
        }

        .recommendation-icon {
            font-size: 3em;
            margin-bottom: 15px;
        }

        .recommendation-title {
            font-size: 1.5em;
            font-weight: 700;
            margin-bottom: 15px;
        }

        .recommendation-text {
            font-size: 1.05em;
            line-height: 1.6;
            opacity: 0.95;
        }

        .positive {
            color: #22c55e;
        }

        .negative {
            color: #ef4444;
        }

        @media (max-width: 768px) {
            .container {
                padding: 20px;
            }

            h1 {
                font-size: 1.8em;
            }

            .input-row {
                grid-template-columns: 1fr;
            }

            .results-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üí∞ ROI Calculator</h1>
        <p class="subtitle">Calculate your Return on Investment with detailed breakdowns</p>

        <div class="input-section">
            <div class="input-group">
                <label for="initialInvestment">Initial Investment (‚Çπ)</label>
                <input type="number" id="initialInvestment" placeholder="Enter initial investment" step="0.01" min="0">
            </div>

            <div class="input-group">
                <label for="finalValue">Final Value (‚Çπ)</label>
                <input type="number" id="finalValue" placeholder="Enter final value" step="0.01" min="0">
            </div>

            <div class="input-row">
                <div class="input-group">
                    <label for="startDate">Start Date</label>
                    <input type="date" id="startDate">
                </div>

                <div class="input-group">
                    <label for="endDate">End Date</label>
                    <input type="date" id="endDate">
                </div>
            </div>

            <div class="input-group">
                <label for="inflationRate">Annual Inflation Rate (%) <span style="font-weight: 400; color: #888;">- Optional</span></label>
                <input type="number" id="inflationRate" placeholder="e.g., 6.5 for India" step="0.01" value="6.5">
            </div>

            <div class="real-estate-section" id="realEstateSection">
                <div class="section-header" onclick="toggleRealEstate()">
                    <span>üèòÔ∏è Real Estate Specific (Optional)</span>
                    <span class="toggle-icon" id="toggleIcon">‚ñº</span>
                </div>
                <div class="real-estate-inputs" id="realEstateInputs" style="display: none;">
                    <div class="input-row">
                        <div class="input-group">
                            <label for="monthlyRent">Monthly Rental Income (‚Çπ)</label>
                            <input type="number" id="monthlyRent" placeholder="0" step="0.01" min="0" value="0">
                        </div>
                        <div class="input-group">
                            <label for="rentalIncrease">Annual Rent Increase (%)</label>
                            <input type="number" id="rentalIncrease" placeholder="e.g., 5" step="0.1" value="5">
                        </div>
                    </div>

                    <div class="input-row">
                        <div class="input-group">
                            <label for="propertyTax">Annual Property Tax (‚Çπ)</label>
                            <input type="number" id="propertyTax" placeholder="0" step="0.01" min="0" value="0">
                        </div>
                        <div class="input-group">
                            <label for="maintenance">Annual Maintenance (‚Çπ)</label>
                            <input type="number" id="maintenance" placeholder="0" step="0.01" min="0" value="0">
                        </div>
                    </div>

                    <div class="input-group">
                        <label for="otherCosts">Other Annual Costs (‚Çπ) <span style="font-weight: 400; color: #888;">- Insurance, HOA, etc.</span></label>
                        <input type="number" id="otherCosts" placeholder="0" step="0.01" min="0" value="0">
                    </div>
                </div>
            </div>

            <button class="calculate-btn" onclick="calculateROI()">Calculate ROI</button>
        </div>

        <div class="results-section" id="resultsSection">
            <div class="results-grid">
                <div class="result-card highlight">
                    <div class="result-label">Nominal ROI</div>
                    <div class="result-value" id="actualROI">-</div>
                </div>

                <div class="result-card">
                    <div class="result-label">Real ROI (Inflation-Adjusted)</div>
                    <div class="result-value" id="realROI">-</div>
                </div>

                <div class="result-card">
                    <div class="result-label">Total Gain/Loss</div>
                    <div class="result-value" id="totalGain">-</div>
                </div>

                <div class="result-card">
                    <div class="result-label">CAGR</div>
                    <div class="result-value" id="cagr">-</div>
                </div>

                <div class="result-card">
                    <div class="result-label">Real CAGR</div>
                    <div class="result-value" id="realCAGR">-</div>
                </div>

                <div class="result-card">
                    <div class="result-label">Inflation Impact</div>
                    <div class="result-value" id="inflationImpact">-</div>
                </div>
            </div>

            <div class="recommendation-section" id="recommendationSection">
                <div class="recommendation-box" id="recommendationBox">
                    <div class="recommendation-icon" id="recommendationIcon">üìä</div>
                    <div class="recommendation-title" id="recommendationTitle">Investment Analysis</div>
                    <div class="recommendation-text" id="recommendationText"></div>
                </div>
            </div>

            <div class="breakdown-section">
                <div class="breakdown-title">üìä Detailed Breakdown</div>
                
                <div class="breakdown-item">
                    <span class="breakdown-label">Investment Period</span>
                    <span class="breakdown-value" id="period">-</span>
                </div>

                <div class="breakdown-item">
                    <span class="breakdown-label">Total Days</span>
                    <span class="breakdown-value" id="totalDays">-</span>
                </div>

                <div class="breakdown-item">
                    <span class="breakdown-label">Total Inflation (Period)</span>
                    <span class="breakdown-value" id="totalInflation">-</span>
                </div>

                <div class="breakdown-item">
                    <span class="breakdown-label">Real Value After Inflation</span>
                    <span class="breakdown-value" id="realValue">-</span>
                </div>

                <div class="breakdown-item">
                    <span class="breakdown-label">ROI per Year (Nominal)</span>
                    <span class="breakdown-value" id="roiPerYear">-</span>
                </div>

                <div class="breakdown-item">
                    <span class="breakdown-label">ROI per Year (Real)</span>
                    <span class="breakdown-value" id="realROIPerYear">-</span>
                </div>

                <div class="breakdown-item">
                    <span class="breakdown-label">ROI per Month (Nominal)</span>
                    <span class="breakdown-value" id="roiPerMonth">-</span>
                </div>

                <div class="breakdown-item">
                    <span class="breakdown-label">ROI per Day (Nominal)</span>
                    <span class="breakdown-value" id="roiPerDay">-</span>
                </div>

                <div class="breakdown-item">
                    <span class="breakdown-label">Gain/Loss per Year</span>
                    <span class="breakdown-value" id="gainPerYear">-</span>
                </div>

                <div class="breakdown-item">
                    <span class="breakdown-label">Gain/Loss per Month</span>
                    <span class="breakdown-value" id="gainPerMonth">-</span>
                </div>

                <div class="breakdown-item">
                    <span class="breakdown-label">Gain/Loss per Day</span>
                    <span class="breakdown-value" id="gainPerDay">-</span>
                </div>
            </div>

            <div class="breakdown-section" id="realEstateBreakdown" style="display: none;">
                <div class="breakdown-title">üèòÔ∏è Real Estate Analysis</div>
                
                <div class="breakdown-item">
                    <span class="breakdown-label">Total Rental Income</span>
                    <span class="breakdown-value positive" id="totalRentalIncome">-</span>
                </div>

                <div class="breakdown-item">
                    <span class="breakdown-label">Total Operating Costs</span>
                    <span class="breakdown-value negative" id="totalCosts">-</span>
                </div>

                <div class="breakdown-item">
                    <span class="breakdown-label">Net Rental Income</span>
                    <span class="breakdown-value" id="netRentalIncome">-</span>
                </div>

                <div class="breakdown-item">
                    <span class="breakdown-label">Capital Appreciation</span>
                    <span class="breakdown-value" id="capitalAppreciation">-</span>
                </div>

                <div class="breakdown-item">
                    <span class="breakdown-label">Total Return (with Rent)</span>
                    <span class="breakdown-value" id="totalReturnWithRent">-</span>
                </div>

                <div class="breakdown-item">
                    <span class="breakdown-label">ROI Including Rental Income</span>
                    <span class="breakdown-value" id="roiWithRent">-</span>
                </div>

                <div class="breakdown-item">
                    <span class="breakdown-label">Average Annual Rental Yield</span>
                    <span class="breakdown-value" id="rentalYield">-</span>
                </div>

                <div class="breakdown-item">
                    <span class="breakdown-label">Cash-on-Cash Return (Annual Avg)</span>
                    <span class="breakdown-value" id="cashOnCash">-</span>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Set default dates
        window.onload = function() {
            const today = new Date();
            const oneYearAgo = new Date();
            oneYearAgo.setFullYear(today.getFullYear() - 1);
            
            document.getElementById('startDate').valueAsDate = oneYearAgo;
            document.getElementById('endDate').valueAsDate = today;
        };

        function toggleRealEstate() {
            const inputs = document.getElementById('realEstateInputs');
            const icon = document.getElementById('toggleIcon');
            
            if (inputs.style.display === 'none') {
                inputs.style.display = 'block';
                icon.classList.add('rotated');
            } else {
                inputs.style.display = 'none';
                icon.classList.remove('rotated');
            }
        }

        function calculateROI() {
            // Get input values
            const initialInvestment = parseFloat(document.getElementById('initialInvestment').value);
            const finalValue = parseFloat(document.getElementById('finalValue').value);
            const startDate = new Date(document.getElementById('startDate').value);
            const endDate = new Date(document.getElementById('endDate').value);
            const inflationRate = parseFloat(document.getElementById('inflationRate').value) || 0;

            // Real estate specific inputs
            const monthlyRent = parseFloat(document.getElementById('monthlyRent').value) || 0;
            const rentalIncrease = parseFloat(document.getElementById('rentalIncrease').value) || 0;
            const propertyTax = parseFloat(document.getElementById('propertyTax').value) || 0;
            const maintenance = parseFloat(document.getElementById('maintenance').value) || 0;
            const otherCosts = parseFloat(document.getElementById('otherCosts').value) || 0;

            // Validate inputs
            if (isNaN(initialInvestment) || isNaN(finalValue)) {
                alert('Please enter valid investment amounts');
                return;
            }

            if (!document.getElementById('startDate').value || !document.getElementById('endDate').value) {
                alert('Please select both start and end dates');
                return;
            }

            if (startDate >= endDate) {
                alert('End date must be after start date');
                return;
            }

            if (initialInvestment <= 0) {
                alert('Initial investment must be greater than 0');
                return;
            }

            // Calculate time periods
            const timeDiff = endDate - startDate;
            const totalDays = Math.floor(timeDiff / (1000 * 60 * 60 * 24));
            const totalYears = totalDays / 365.25;
            const totalMonths = totalDays / 30.44;

            // Calculate rental income with annual increase
            let totalRentalIncome = 0;
            let currentRent = monthlyRent;
            for (let year = 0; year < totalYears; year++) {
                const fullYear = year < Math.floor(totalYears);
                const yearsInPeriod = fullYear ? 1 : (totalYears - Math.floor(totalYears));
                totalRentalIncome += currentRent * 12 * yearsInPeriod;
                currentRent = currentRent * (1 + rentalIncrease / 100);
            }

            // Calculate total costs
            const annualCosts = propertyTax + maintenance + otherCosts;
            const totalCosts = annualCosts * totalYears;
            const netRentalIncome = totalRentalIncome - totalCosts;

            // Calculate capital appreciation (price increase)
            const capitalAppreciation = finalValue - initialInvestment;

            // Calculate total return including rental income
            const totalReturnWithRent = capitalAppreciation + netRentalIncome;
            const roiWithRent = (totalReturnWithRent / initialInvestment) * 100;

            // Calculate rental yield (annual average)
            const avgAnnualRent = totalRentalIncome / totalYears;
            const avgAnnualCosts = annualCosts;
            const netAnnualRent = avgAnnualRent - avgAnnualCosts;
            const rentalYield = (netAnnualRent / initialInvestment) * 100;

            // Cash on cash return
            const cashOnCash = rentalYield;

            // Calculate nominal ROI (without rental income)
            const gain = finalValue - initialInvestment;
            const actualROI = (gain / initialInvestment) * 100;

            // Calculate CAGR (Compound Annual Growth Rate)
            const cagr = (Math.pow(finalValue / initialInvestment, 1 / totalYears) - 1) * 100;

            // Calculate inflation-adjusted values
            const totalInflation = Math.pow(1 + (inflationRate / 100), totalYears) - 1;
            const inflationMultiplier = 1 + totalInflation;
            const inflationAdjustedInitial = initialInvestment * inflationMultiplier;
            const realGain = finalValue - inflationAdjustedInitial;
            const realROI = (realGain / initialInvestment) * 100;
            
            // Calculate Real CAGR (Fisher equation)
            const realCAGR = ((1 + cagr/100) / (1 + inflationRate/100) - 1) * 100;
            
            // Inflation impact
            const inflationImpact = (actualROI - realROI);

            // Calculate per period returns
            const roiPerYear = actualROI / totalYears;
            const roiPerMonth = actualROI / totalMonths;
            const roiPerDay = actualROI / totalDays;
            const realROIPerYear = realROI / totalYears;

            const gainPerYear = gain / totalYears;
            const gainPerMonth = gain / totalMonths;
            const gainPerDay = gain / totalDays;

            // Display main results
            document.getElementById('actualROI').textContent = formatPercent(actualROI);
            document.getElementById('actualROI').className = 'result-value ' + (actualROI >= 0 ? 'positive' : 'negative');

            document.getElementById('realROI').textContent = formatPercent(realROI);
            document.getElementById('realROI').className = 'result-value ' + (realROI >= 0 ? 'positive' : 'negative');

            document.getElementById('totalGain').textContent = formatCurrency(gain);
            document.getElementById('totalGain').className = 'result-value ' + (gain >= 0 ? 'positive' : 'negative');

            document.getElementById('cagr').textContent = formatPercent(cagr);
            document.getElementById('cagr').className = 'result-value ' + (cagr >= 0 ? 'positive' : 'negative');

            document.getElementById('realCAGR').textContent = formatPercent(realCAGR);
            document.getElementById('realCAGR').className = 'result-value ' + (realCAGR >= 0 ? 'positive' : 'negative');

            document.getElementById('inflationImpact').textContent = formatPercent(inflationImpact);
            document.getElementById('inflationImpact').className = 'result-value negative';

            // Display breakdown
            document.getElementById('period').textContent = `${totalYears.toFixed(2)} years`;
            document.getElementById('totalDays').textContent = totalDays.toLocaleString() + ' days';
            
            document.getElementById('totalInflation').textContent = formatPercent(totalInflation * 100);
            document.getElementById('realValue').textContent = formatCurrency(finalValue / inflationMultiplier);
            
            document.getElementById('roiPerYear').textContent = formatPercent(roiPerYear);
            document.getElementById('roiPerYear').className = 'breakdown-value ' + (roiPerYear >= 0 ? 'positive' : 'negative');
            
            document.getElementById('realROIPerYear').textContent = formatPercent(realROIPerYear);
            document.getElementById('realROIPerYear').className = 'breakdown-value ' + (realROIPerYear >= 0 ? 'positive' : 'negative');
            
            document.getElementById('roiPerMonth').textContent = formatPercent(roiPerMonth);
            document.getElementById('roiPerMonth').className = 'breakdown-value ' + (roiPerMonth >= 0 ? 'positive' : 'negative');
            
            document.getElementById('roiPerDay').textContent = formatPercent(roiPerDay);
            document.getElementById('roiPerDay').className = 'breakdown-value ' + (roiPerDay >= 0 ? 'positive' : 'negative');

            document.getElementById('gainPerYear').textContent = formatCurrency(gainPerYear);
            document.getElementById('gainPerYear').className = 'breakdown-value ' + (gainPerYear >= 0 ? 'positive' : 'negative');
            
            document.getElementById('gainPerMonth').textContent = formatCurrency(gainPerMonth);
            document.getElementById('gainPerMonth').className = 'breakdown-value ' + (gainPerMonth >= 0 ? 'positive' : 'negative');
            
            document.getElementById('gainPerDay').textContent = formatCurrency(gainPerDay);
            document.getElementById('gainPerDay').className = 'breakdown-value ' + (gainPerDay >= 0 ? 'positive' : 'negative');

            // Display real estate analysis if applicable
            const hasRealEstateData = monthlyRent > 0 || propertyTax > 0 || maintenance > 0 || otherCosts > 0;
            
            if (hasRealEstateData) {
                document.getElementById('realEstateBreakdown').style.display = 'block';
                
                document.getElementById('totalRentalIncome').textContent = formatCurrency(totalRentalIncome);
                document.getElementById('totalCosts').textContent = formatCurrency(totalCosts);
                
                document.getElementById('netRentalIncome').textContent = formatCurrency(netRentalIncome);
                document.getElementById('netRentalIncome').className = 'breakdown-value ' + (netRentalIncome >= 0 ? 'positive' : 'negative');
                
                document.getElementById('capitalAppreciation').textContent = formatCurrency(capitalAppreciation);
                document.getElementById('capitalAppreciation').className = 'breakdown-value ' + (capitalAppreciation >= 0 ? 'positive' : 'negative');
                
                document.getElementById('totalReturnWithRent').textContent = formatCurrency(totalReturnWithRent);
                document.getElementById('totalReturnWithRent').className = 'breakdown-value ' + (totalReturnWithRent >= 0 ? 'positive' : 'negative');
                
                document.getElementById('roiWithRent').textContent = formatPercent(roiWithRent);
                document.getElementById('roiWithRent').className = 'breakdown-value ' + (roiWithRent >= 0 ? 'positive' : 'negative');
                
                document.getElementById('rentalYield').textContent = formatPercent(rentalYield);
                document.getElementById('rentalYield').className = 'breakdown-value ' + (rentalYield >= 0 ? 'positive' : 'negative');
                
                document.getElementById('cashOnCash').textContent = formatPercent(cashOnCash);
                document.getElementById('cashOnCash').className = 'breakdown-value ' + (cashOnCash >= 0 ? 'positive' : 'negative');
            } else {
                document.getElementById('realEstateBreakdown').style.display = 'none';
            }

            // Generate investment recommendation
            generateRecommendation(realROI, realCAGR, actualROI, cagr, inflationRate, totalYears, hasRealEstateData, rentalYield);

            // Show results section
            document.getElementById('resultsSection').classList.add('active');
            
            // Scroll to results
            document.getElementById('resultsSection').scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }

        function generateRecommendation(realROI, realCAGR, nominalROI, nominalCAGR, inflationRate, years, hasRealEstate, rentalYield) {
            const box = document.getElementById('recommendationBox');
            const icon = document.getElementById('recommendationIcon');
            const title = document.getElementById('recommendationTitle');
            const text = document.getElementById('recommendationText');
            
            let rating, iconEmoji, titleText, recommendationText;

            // Analyze based on real (inflation-adjusted) CAGR
            if (realCAGR >= 15) {
                rating = 'excellent';
                iconEmoji = 'üéØ';
                titleText = 'Excellent Investment!';
                recommendationText = `This is an outstanding investment with a real CAGR of ${formatPercent(realCAGR)}. Your returns are significantly beating inflation (${formatPercent(inflationRate)}), meaning your wealth is growing substantially in real terms. This is an exceptional performer that's building significant wealth.`;
                
                if (hasRealEstate) {
                    recommendationText += ` For real estate, this excellent performance likely comes from a combination of strong location appreciation and good rental income. Continue holding this property.`;
                }
            } else if (realCAGR >= 12) {
                rating = 'good';
                iconEmoji = '‚úÖ';
                titleText = 'Good Investment';
                recommendationText = `This is a solid investment with a real CAGR of ${formatPercent(realCAGR)}. Your returns are comfortably beating inflation (${formatPercent(inflationRate)}), helping build real wealth over time. This is a healthy return that preserves and grows purchasing power well.`;
                
                if (hasRealEstate) {
                    recommendationText += ` For real estate, this is a strong performer. Properties delivering 12-15% real returns are meeting good investment standards.`;
                    if (rentalYield >= 4) {
                        recommendationText += ` Your rental yield of ${formatPercent(rentalYield)} adds stable income on top of capital appreciation.`;
                    }
                }
            } else if (realCAGR >= 7) {
                rating = 'moderate';
                iconEmoji = 'üìä';
                titleText = 'Moderate Investment';
                recommendationText = `This investment shows a real CAGR of ${formatPercent(realCAGR)}, which moderately beats inflation (${formatPercent(inflationRate)}). While positive, the returns are average.`;
                
                if (hasRealEstate) {
                    recommendationText += ` For real estate, 7-12% real returns are acceptable but not exceptional. Consider: Is the location still developing? Can you improve the property to increase value or rental income? Are comparable properties performing better? `;
                    if (rentalYield < 3) {
                        recommendationText += ` Note: Your rental yield of ${formatPercent(rentalYield)} is on the lower side. Consider raising rents or reducing operating costs.`;
                    }
                } else {
                    recommendationText += ` Consider if there are better opportunities available or if this aligns with your financial goals.`;
                }
            } else if (realCAGR >= 0) {
                rating = 'poor';
                iconEmoji = '‚ö†Ô∏è';
                titleText = 'Below-Average Investment';
                recommendationText = `With a real CAGR of ${formatPercent(realCAGR)}, this investment is underperforming. Your nominal returns of ${formatPercent(nominalCAGR)} are mostly being eroded by inflation (${formatPercent(inflationRate)}).`;
                
                if (hasRealEstate) {
                    recommendationText += ` For real estate, returns below 7% real CAGR are concerning. This suggests: The property may be in a slow-growth area, you may have purchased at a market peak, or operating costs are too high. Action items: Review comparable property sales in the area, consider cosmetic improvements to increase value, optimize rental income, or evaluate if it's time to sell and reinvest elsewhere.`;
                    if (rentalYield < 2) {
                        recommendationText += ` Your rental yield of ${formatPercent(rentalYield)} is very low - you're not generating meaningful income from this property.`;
                    }
                } else {
                    recommendationText += ` You're preserving capital but not growing real wealth effectively. Consider reviewing this investment.`;
                }
            } else {
                rating = 'poor';
                iconEmoji = '‚ùå';
                titleText = 'Poor Investment - Negative Returns';
                recommendationText = `This investment has a negative real CAGR of ${formatPercent(realCAGR)}, meaning you're losing purchasing power. Inflation at ${formatPercent(inflationRate)} is completely eroding your returns.`;
                
                if (hasRealEstate) {
                    recommendationText += ` For real estate, negative real returns are a serious red flag. You're losing money in real terms. This could indicate: Declining neighborhood, property deterioration, market downturn, or excessive holding costs. Immediate action needed: Get a current market appraisal, assess if the area has future growth potential, calculate if selling now vs holding is better, consider if major renovations could turn it around. If there's no clear path to improvement, it may be time to cut losses and redeploy capital.`;
                    if (rentalYield < 0) {
                        recommendationText += ` You're losing money on rental operations too - costs exceed rental income.`;
                    }
                } else {
                    recommendationText += ` This investment is not meeting the basic goal of wealth preservation. Strongly consider alternative investments.`;
                }
            }

            // Add context about time period
            if (years < 1) {
                recommendationText += ` Note: This is a short-term analysis (${(years * 12).toFixed(1)} months). Real estate typically performs better over longer periods.`;
            } else if (years < 3) {
                recommendationText += ` This is a ${years.toFixed(1)}-year period. Real estate investments typically show better returns over 5+ years due to market cycles.`;
            } else if (years >= 5) {
                recommendationText += ` This ${years.toFixed(1)}-year track record provides reliable insight into the ${hasRealEstate ? "property's" : "investment's"} long-term potential.`;
            }

            // Set the recommendation
            box.className = 'recommendation-box ' + rating;
            icon.textContent = iconEmoji;
            title.textContent = titleText;
            text.textContent = recommendationText;
        }

        function formatCurrency(value) {
            const formatted = Math.abs(value).toLocaleString('en-IN', {
                minimumFractionDigits: 2,
                maximumFractionDigits: 2
            });
            return (value >= 0 ? '‚Çπ' : '-‚Çπ') + formatted;
        }

        function formatPercent(value) {
            return (value >= 0 ? '+' : '') + value.toFixed(2) + '%';
        }
    </script>
</body>
</html>
